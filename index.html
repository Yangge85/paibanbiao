<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>排班表</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        h1 {
            text-align: center;
            margin-left: 0;
            margin-right: 0;
        }

        .schedule {
            margin-top: 20px;
        }

        .person {
            font-weight: bold;
        }

        .row {
            display: flex;
            justify-content: space-between;
            padding: 2px 0;
            /* 调小间距 */
        }

        .row span {
            flex: 1;
            text-align: center;
        }

        .row span:nth-child(1),
        .row span:nth-child(2),
        .row span:nth-child(3) {
            width: 33%;
        }

        h3 {
            margin-bottom: 5px;
            /* 减少日期与班次行的间距 */
        }

        hr {
            margin: 10px 0;
        }

        .date-heading {
            font-size: 16px;
            font-weight: bold;
        }

        .weekend {
            color: red;
            /* 周六周日显示为红色 */
        }
    </style>
</head>

<body>
    <h1 style="text-align: center; width: 100%;">驻村工作队排班表</h1>

    <label for="date">选择日期：</label>
    <input type="date" id="date" />

    <div id="schedule" class="schedule"></div>

    <script>
        const persons = [
            ['杜　阳', '左平周', '王勇伟'],  // 9月1日，杜阳用全角空格调整宽度
            ['王勇伟', '杜　阳', '左平周'],  // 9月2日
            ['左平周', '王勇伟', '杜　阳']   // 9月3日
        ];

        const weekDays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];

        function generateSchedule(startDate) {
            const scheduleDiv = document.getElementById('schedule');
            scheduleDiv.innerHTML = '';  // 清空之前的内容

            for (let i = 0; i < 7; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(currentDate.getDate() + i);

                // 根据天数计算班次循环
                const cycleIndex = (currentDate.getDate() - 1) % 3;
                const [primary, secondary, tertiary] = persons[cycleIndex];

                // 格式化日期为 yyyy-mm-dd 和 星期几
                const dateStr = currentDate.toISOString().split('T')[0];
                const weekDay = weekDays[currentDate.getDay()];
                // 检查是否是周末
                const isWeekend = currentDate.getDay() === 0 || currentDate.getDay() === 6;
                const dateClass = isWeekend ? 'weekend' : '';
                const scheduleHTML = `
                    <div>
                        <h3>${dateStr} (${weekDay})</h3>
                        <div class="row">
                            <span>主班：${primary}</span> | 
                            <span>副班：${secondary}</span> | 
                            <span>副班：${tertiary}</span>
                        </div>
                    </div>
                    <hr/>
                `;

                scheduleDiv.innerHTML += scheduleHTML;
            }
        }

        // 页面加载时显示今天及未来7天的排班
        window.onload = function () {
            const today = new Date();
            generateSchedule(today);
        };

        // 当用户选择了日期后，显示从该日期开始的7天排班
        document.getElementById('date').addEventListener('change', function () {
            const selectedDate = new Date(this.value);
            generateSchedule(selectedDate);
        });
    </script>
</body>

</html>
